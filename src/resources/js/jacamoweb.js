!function(n){var a={};function __webpack_require__(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}__webpack_require__.m=n,__webpack_require__.c=a,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)__webpack_require__.d(n,a,function(e){return t[e]}.bind(null,a));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)}([function(e,n){e.exports={get:function get(a){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET",a),n.onload=function(){200==n.status?e(n.response):t(Error(n.statusText))},n.onerror=function(){t(Error("Network Error"))},n.send()})},post:function post(a,o,r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("POST",a),null!=r&&n.setRequestHeader("Content-type",r),n.onload=function(){200==n.status?e(n.response):t(n.statusText)},n.onerror=function(){t(Error("Network Error"))},n.send(o)})},deleteResource:function deleteResource(a){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("DELETE",a),n.onload=function(){200==n.status?e(n.response):t(Error(n.statusText))},n.onerror=function(){t(Error("Network Error"))},n.send()})},createTable:function createTable(e){return t=document.createElement("table"),t.setAttribute("class","striped"),t.style.maxHeight="100%",document.getElementById(e).appendChild(t),t},addTwoCellsInARow:function addTwoCellsInARow(e,t,n){var a,o,r;o=(a=e.insertRow(-1)).insertCell(-1),r=a.insertCell(-1),o.innerHTML=t,r.innerHTML=n},instantMessage:function instantMessage(e){null!=e&&($("#top-alert-message").text(e),$("#top-alert").fadeTo(2e3+10*e.length,500).slideUp(500,function(){$("#top-alert").slideUp(500)}))},createDefaultHR:function createDefaultHR(){var e=document.createElement("hr");return e.style.display="line",e.style.background="#f8f8f8",e.style.borderBottom="1px solid #ddd",e}}},function(e,t){e.exports={MAX_LENGTH:35,HIDDEN_ARTS:["cartago.WorkspaceArtifact","cartago.tools.Console","cartago.ManRepoArtifact","cartago.tools.TupleSpace","cartago.NodeArtifact","ora4mas.nopl.GroupBoard","ora4mas.nopl.OrgBoard","ora4mas.nopl.SchemeBoard","ora4mas.nopl.NormativeBoard","cartago.AgentBodyArtifact","ora4mas.light.LightOrgBoard","ora4mas.light.LightNormativeBoard","ora4mas.light.LightGroupBoard","ora4mas.light.LightSchemeBoard"]}},function(e,t,n){var i=n(0),a=getCookieValue("username");if(!a){!function promptCredentialDialog(){var e=document.createElement("div");e.setAttribute("id","git-dialog-full");var t=document.createElement("div");t.setAttribute("id","git-dialog-main"),e.appendChild(t);var n=document.createElement("div");n.setAttribute("id","git-dialog-body"),n.innerHTML="Enter your credentials for the jacamo-web git server: <br>Username:",t.appendChild(n);var a=document.createElement("input");a.setAttribute("id","git-username"),a.setAttribute("placeholder","Username"),n.appendChild(a),n.innerHTML+="Password: &zwnj;";var o=document.createElement("input");o.setAttribute("id","git-username"),o.setAttribute("type","password"),o.setAttribute("placeholder","Password"),n.appendChild(o);var r=document.createElement("button");r.setAttribute("class","git-button"),r.addEventListener("click",function(e){cancelDialog("git-dialog-full")}),r.innerText="Cancel",t.appendChild(r);var s=document.createElement("button");s.setAttribute("class","git-button"),s.setAttribute("id","git-credential-save"),s.setAttribute("disabled","true"),s.innerText="Commit",s.addEventListener("click",function(e){!function storeCredentials(){cancelDialog("git-dialog-full"),setCookie("username",c.value),setCookie("password",l.value)}()}),t.appendChild(s),document.getElementById("doc-wrapper").appendChild(e)}();var c=document.querySelector("#git-username"),l=document.querySelector("#git-password");c.addEventListener("input",checkSaveActivation),l.addEventListener("input",checkSaveActivation)}function checkSaveActivation(){document.querySelector("#git-credential-save").disabled=0===c.value.length&&0===l.value.length}function cancelDialog(e){var t=document.querySelector("#".concat(e));t.parentNode.removeChild(t)}function setCookie(e,t){return document.cookie="".concat(e,"=").concat(t||"","; path=/")}function getCookieValue(e){var t=document.cookie.match("(^|[^;]+)\\s*".concat(e,"\\s*=\\s*([^;]+)"));return t?t.pop():""}toastr.options.preventDuplicates=!0;var o=new URL(window.location.href),r=o.searchParams.get("aslfile")||o.searchParams.get("javafile");function commitChanges(){var e=document.querySelector("#git-commit-message").value;cancelDialog("commit-dialog-full"),e?i.post("/commit?email="+getCookieValue("username"),e).then(function(e){toastr.info("Commit result: ".concat(e),{timeOut:1e4})}).catch(function(e){toastr.error(e,{timeOut:1e4})}):toastr.error("Operation cancelled.",{timeOut:1e4})}r&&i.post("/lock/".concat(r,"?username=").concat(a)).then(function(e){var t=JSON.parse(e);if(t[r]&&1<t[r].length){var n=t[r].slice(0,-1);toastr.warning("The following user(s) are already editing this file: ".concat(n.join(", "),"."),{timeOut:1e4})}}),window.onbeforeunload=function(e){navigator.sendBeacon("/unlock/".concat(r,"?username=").concat(a))},e.exports={promptCommitDialog:function promptCommitDialog(){var e=document.createElement("div");e.setAttribute("id","commit-dialog-full");var t=document.createElement("div");t.setAttribute("id","git-dialog-main"),e.appendChild(t);var n=document.createElement("div");n.setAttribute("id","git-dialog-body"),n.innerHTML="Enter your commit message here: <br>",t.appendChild(n);var a=document.createElement("input");a.setAttribute("id","git-commit-message"),a.setAttribute("placeholder","Commit message"),a.addEventListener("input",function(e){!function checkCommitActivation(){var e=document.querySelector("#git-commit"),t=document.querySelector("#git-commit-message");e.disabled=0===t.value.length}()}),n.appendChild(a);var o=document.createElement("div");o.setAttribute("id","commit-dialog-issues"),n.appendChild(o);var r=document.createElement("button");r.setAttribute("class","git-button"),r.addEventListener("click",function(e){cancelDialog("commit-dialog-full")}),r.innerText="Cancel",t.appendChild(r);var s=document.createElement("button");s.setAttribute("class","git-button"),s.setAttribute("id","git-commit"),s.setAttribute("disabled","true"),s.innerText="Commit",s.addEventListener("click",function(e){commitChanges()}),t.appendChild(s),document.getElementById("doc-wrapper").appendChild(e),i.get("status").then(function(e){return function renderIssueOverview(e){jResponse=JSON.parse(e);var t=jResponse.added.filter(filter).concat(jResponse.modified.filter(filter)).map(function(e){return e.substring(e.lastIndexOf("/")+1)});0<t.length&&(document.querySelector("#commit-dialog-issues").innerHTML+='<h4 class="agent-check-heading">Agent Checks</h4>');function filter(e){return e.endsWith(".asl")}t.forEach(function(a){return i.get("/agents/".concat(a.split(".")[0],"/aslfile/").concat(a)).then(function(e){i.post("/agents/".concat(a.split(".")[0],"/parseAslfile/").concat(a),"--blob\r\ncontent-disposition: form-data; name=aslfile\r\n\r\n".concat(e,"\r\n--blob--"),"multipart/form-data; boundary=blob").then(function(e){var t='<div class="issue-check correct">Agent '.concat(a.split(".")[0],": ").concat(e,"</div>");document.querySelector("#commit-dialog-issues").innerHTML+=t}).catch(function(e){if(e.startsWith("Warning")){var t='<div class="issue-check warning">Warning: <strong>Agent '.concat(a.split(".")[0],"</strong>: ").concat(e,"</div>");document.querySelector("#commit-dialog-issues").innerHTML+=t}else{var n='<div class="issue-check error">Error: <strong>Agent '.concat(a.split(".")[0],"</strong>: ").concat(e,"</div>");document.querySelector("#commit-dialog-issues").innerHTML+=n}})})})}(e)})},pushChanges:function pushChanges(){var e=getCookieValue("username"),t=getCookieValue("password");i.post("/push?username="+e+"&password="+btoa(t)).then(function(e){toastr.info("Push result: ".concat(e),{timeOut:1e4})}).catch(function(e){toastr.error(e,{timeOut:1e4})})},cancelDialog:cancelDialog,commitChanges:commitChanges}},function(e,t,n){n(4),n(5),n(7),n(8),n(2),n(9)},function(e,t,n){var u=n(0),i=n(1),c=n(2);function updateMASMenu(e,t){if(t){var n=document.createElement("label");n.setAttribute("for","doc-drawer-checkbox"),n.setAttribute("class","button drawer-x-close"),document.getElementById(e).appendChild(n);var a=document.createElement("h3");a.innerHTML="&#160",document.getElementById(e).appendChild(a)}var o=document.createElement("a");o.setAttribute("href","./index_launch.html"),o.innerHTML="launch a MAS",document.getElementById(e).appendChild(o),document.getElementById(e).appendChild(u.createDefaultHR());var r=document.createElement("a");r.addEventListener("click",function(){c.promptCommitDialog()}),r.innerHTML="commit changes",document.getElementById(e).appendChild(r);var s=document.createElement("a");s.addEventListener("click",function(){c.pushChanges()}),s.innerHTML="push changes",document.getElementById(e).appendChild(s)}window.updateMASMenus=function updateMASMenus(){updateMASMenu("nav-drawer",!0),updateMASMenu("nav-drawer-frame",!1)},window.getMASAsDot=function getMASAsDot(){var s=[];u.get("./overview").then(function(e){var t=JSON.parse(e);s.push('digraph G { graph [ rankdir="TB" bgcolor="transparent"]\n'),s.push("\tsubgraph cluster_org {\n"),s.push('\t\tlabel="organisation" labeljust="r" pencolor=gray fontcolor=gray\n');var a=[];t.agents.forEach(function(t){t.roles.forEach(function(e){s.push('\t\t"'+e.group+'" [ label = "'+e.group+'" shape=tab style=filled pencolor=black fillcolor=lightgrey];\n'),a.push('\t"'+e.group+'"->"'+t.agent+'" [arrowtail=normal dir=back label="'+e.role+'"]\n')}),t.missions.forEach(function(n){s.push('\t\t"'+n.scheme+'" [ label = "'+n.scheme+'" shape=hexagon style=filled pencolor=black fillcolor=linen];\n'),a.push('\t"'+n.scheme+'"->"'+t.agent+'" [arrowtail=normal dir=back label="'+n.mission+'"]\n'),n.responsibles.forEach(function(e){var t='\t"'+e+'"->"'+n.scheme+'" [arrowtail=normal arrowhead=open label="responsible"]\n';a.includes(t)||(a.push(t),s.push('\t\t{rank=same "'+e+'" "'+n.scheme+'"}\n'))})})}),s.push("\t}\n"),s.push(a.join(" ")),s.push("\tsubgraph cluster_ag {\n"),s.push('\t\tlabel="agents" labeljust="r" pencolor=gray fontcolor=gray\n');var n=[];t.agents.forEach(function(e){n.push(e.agent);var t=e.agent.length<=i.MAX_LENGTH?e.agent:e.agent.substring(0,i.MAX_LENGTH)+" ...";s.push('\t\t"'+e.agent+'" [label = "'+t+'" shape = "ellipse" style=filled fillcolor=white];\n')}),0<n.length&&s.push('\t\t{rank=same "'+n.join('" "')+'"}\n'),s.push("\t}\n"),s.push("\tsubgraph cluster_env {\n"),s.push('\t\tlabel="environment" labeljust="r" pencolor=gray fontcolor=gray\n'),t.agents.forEach(function(o){var r=[];0<Object.keys(o.workspaces).length&&Object.keys(o.workspaces).forEach(function(e){var t=[],n=o.workspaces[e],a=n.workspace;s.push("\t\tsubgraph cluster_"+a+" {\n"),s.push('\t\t\tlabel="'+a+'" labeljust="r" style=dashed pencolor=gray40 fontcolor=gray40\n'),Object.keys(n.artifacts).forEach(function(e){i.HIDDEN_ARTS.indexOf(n.artifacts[e].type)<0&&(s1=n.artifacts[e].artifact.length<=i.MAX_LENGTH?n.artifacts[e].artifact:n.artifacts[e].artifact.substring(0,i.MAX_LENGTH)+" ...",s.push('\t\t\t"'+a+"_"+n.artifacts[e].artifact+'" [label = "'+s1+":\\n"),s1=n.artifacts[e].type.length<=i.MAX_LENGTH?n.artifacts[e].type:n.artifacts[e].type.substring(0,i.MAX_LENGTH)+" ...",s.push(s1+'"shape=record style=filled fillcolor=white];\n'),r.push(a+"_"+n.artifacts[e].artifact),t.push('\t\t"'+o.agent+'"->"'+a+"_"+n.artifacts[e].artifact+'" [arrowhead=odot]\n'))}),0<r.length&&s.push('\t\t\t{rank=same "'+r.join('" "')+'"}\n'),s.push("\t\t}\n"),s.push(t.join(" "))})}),s.push("\t}\n"),s.push("}\n");var o=d3.transition().duration(750).ease(d3.easeLinear);0===t.agents.length&&(s=['digraph G { graph [ rankdir="TB" bgcolor="transparent"]\n noAg [label=<There is<br />no agents>]\n}\n']),d3.select("#overviewgraph").graphviz().transition(o).renderDot(s.join(""))})},window.getMASs=function getMASs(){u.get("./jcm").then(function(e){var l=JSON.parse(e);Object.keys(l).forEach(function(e){var t=document.createElement("div");t.setAttribute("class","card fluid"),document.getElementById("doc-content").appendChild(t);var n=document.createElement("h4");n.setAttribute("class","section double-padded"),n.innerHTML="<b>"+l[e].jcm.substr(0,l[e].jcm.length-4)+"</b>&#160&#160&#160",t.appendChild(n);var a=document.createElement("a");a.setAttribute("href","./index.html"),a.onclick=function(){!function getaMAS(e){u.get("./jcm/"+e).then(function(e){window.location.assign("./index.html"),window.location.reload()})}(l[e].jcm)},a.innerHTML="[launch]",n.appendChild(a);var o=document.createElement("div");t.appendChild(o);var r=document.createElement("p");o.appendChild(r);var s=document.createElement("i");s.innerHTML="agents: "+l[e].agents.join("&#160  "),r.appendChild(s),r.appendChild(document.createElement("br"));var i=document.createElement("i");if(0<l[e].workspaces.length&&(i.innerHTML="workspaces: "+l[e].workspaces.join("&#160  "),r.appendChild(i),r.appendChild(document.createElement("br"))),0<l[e].organisations.length){var c=document.createElement("i");c.innerHTML="organisations: "+l[e].organisations.join("&#160 "),r.appendChild(c)}})})}},function(e,t,n){var l=n(0),r=n(1);n(6);var i=void 0;var a=void 0;function getAgents(){l.get("./agents").then(function(e){a!=e&&(a=e,updateAgentsMenu("nav-drawer",JSON.parse(e),!0),updateAgentsMenu("nav-drawer-frame",JSON.parse(e),!1))})}function updateAgentsMenu(e,t,n){navElement=document.getElementById(e);for(var a=navElement.lastElementChild;a;)navElement.removeChild(a),a=navElement.lastElementChild;if(n){var o=document.createElement("label");o.setAttribute("for","doc-drawer-checkbox"),o.setAttribute("class","button drawer-close"),navElement.appendChild(o);var r=document.createElement("h3");r.innerHTML="&#160",navElement.appendChild(r)}var s=new URL(location.href).searchParams.get("agent");t.forEach(function(e){var t=document.createElement("a");t.setAttribute("href","./agent.html?agent="+e),t.setAttribute("onclick",'{window.location.assign("./agent.html?agent='+e+'");window.location.reload();}'),t.innerHTML=s===e?"<h5><b>"+e+"</b></h5>":"<h5>"+e+"</h5>",navElement.appendChild(t)}),navElement.appendChild(l.createDefaultHR());var i=document.createElement("a");i.setAttribute("href","./agents_df.html"),i.innerHTML="directory facilitator",navElement.appendChild(i);var c=document.createElement("a");c.setAttribute("href","./agent_new.html"),c.innerHTML="create agent",navElement.appendChild(c)}var o=!1,s="";function makeRequest(e,t,n,a){var o=new XMLHttpRequest;o.open("GET",e);try{o.responseType="msxml-document"}catch(e){}o.onload=function(){t[n]=o.responseXML,function checkLoaded(e){return null!=e.xmlInput&&null!=e.xsltSheet}(t)&&function displayResult(e,t,n){if("undefined"!=typeof XSLTProcessor){var a=new XSLTProcessor;a.importStylesheet(t),n.appendChild(a.transformToFragment(e,document))}else void 0!==e.transformNode&&(n.innerHTML=e.transformNode(t))}(t.xmlInput,t.xsltSheet,a)},o.send()}window.setAutoUpdateAgInterface=function setAutoUpdateAgInterface(){void 0===a&&getAgents(),setInterval(function(){getAgents()},1e3)},window.getCurrentAslContent=function getCurrentAslContent(){var r=new URL(location.href).searchParams.get("agent"),s=new URL(location.href).searchParams.get("aslfile");l.get("/agents/"+r+"/aslfile/"+s).then(function(e){var t=document.createElement("button");t.setAttribute("type","submit"),t.innerHTML="Save & Reload",document.getElementById("footer_menu").appendChild(t);var n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("onclick","localStorage.setItem('agentBuffer', 'No changes made.'); window.history.back();"),n.innerHTML="Discard changes",document.getElementById("footer_menu").appendChild(n);var a=document.createElement("i");a.style.fontSize="14px",a.innerHTML="Editing: <b>"+s+"</b>",document.getElementById("footer_menu").appendChild(a);var o=document.createElement("b");o.setAttribute("id","check"),o.style.fontSize="14px",o.style.color="Navy",o.innerHTML="&#160&#160&#160&#160&#160Parsing code...",document.getElementById("footer_menu").appendChild(o),document.getElementById("usrform").setAttribute("action","/agents/"+r+"/aslfile/"+s),function createAlsEditor(e){var a=document.querySelector("form textarea[name='aslfile']");(i=ace.edit()).session.setValue(e),i.setTheme("ace/theme/tomorrow"),i.session.setMode("ace/mode/jason"),i.setOptions({enableBasicAutocompletion:!0}),a.parentNode.insertBefore(i.container,a),a.style.display="none";var t=a;for(;t&&"form"!=t.localName;)t=t.parentNode;t.addEventListener("submit",function(e){a.value=i.getValue();var t=new URL(location.href).searchParams.get("agent"),n=new URL(location.href).searchParams.get("aslfile");l.post("/agents/"+t+"/aslfile/"+n,new FormData(e.target)).then(function(e){localStorage.setItem("agentBuffer",e),window.location.replace("./agent.html?agent="+t)}),e.preventDefault()},!0)}(e)})},window.setAutoSyntaxChecking=function setAutoSyntaxChecking(){setInterval(function(){!function syntaxCheck(){var e=new URL(location.href).searchParams.get("agent"),t=new URL(location.href).searchParams.get("aslfile"),n=(new FormData,new XMLHttpRequest,"blob"),a="--blob\r\ncontent-disposition: form-data; name=aslfile\r\n\r\n"+i.getValue()+"\r\n--"+n+"--",o=document.getElementById("check");l.post("/agents/"+e+"/parseAslfile/"+t,a,"multipart/form-data; boundary="+n).then(function(e){o.style.color="ForestGreen",o.innerHTML="&#160&#160&#160&#160&#160"+e,i.setTheme("ace/theme/textmate")}).catch(function(e){e.startsWith("Info")?(o.style.color="Navy",o.innerHTML="&#160&#160&#160&#160&#160"+e):e.startsWith("Warning")?(o.style.color="DarkGoldenRod",o.innerHTML="&#160&#160&#160&#160&#160"+e):(o.style.color="FireBrick",o.innerHTML="&#160&#160&#160&#160&#160"+e,i.setTheme("ace/theme/katzenmilch"))})}()},2e3)},window.getInspectionDetails=function getInspectionDetails(){var e=location.search.substring(1).split("&")[0].split("=");selectedAgent=unescape(e[1]),function loadAndTransform(e,t,n){var a={xmlInput:null,xsltSheet:null};makeRequest(e,a,"xmlInput",n),makeRequest(t,a,"xsltSheet",n)}("/agents/"+selectedAgent+"/mind","/xml/agInspection.xsl",document.getElementById("inspection"))},window.updateSuggestions=function updateSuggestions(){var e=location.search.substring(1).split("&")[0].split("=");selectedAgent=unescape(e[1]),l.get("./agents/"+selectedAgent+"/code").then(function(e){!function autocomplete(s,i){var c;function addActive(e){e&&(c>=e.length&&(c=0),c<0&&(c=e.length-1),e[c].classList.add("autocomplete-active"))}function closeAllLists(e){for(var t=document.getElementsByClassName("autocomplete-items"),n=0;n<t.length;n++)e!=t[n]&&e!=s&&t[n].parentNode.removeChild(t[n])}s.addEventListener("input",function(e){var t,n,a,o,r=this.value;if(closeAllLists(),!r)return!1;for(c=-1,(t=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),t.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(t),o=0;o<Object.keys(i).length;o++)Object.keys(i)[o].substr(0,r.length).toUpperCase()==r.toUpperCase()&&((n=document.createElement("DIV")).innerHTML="<strong>"+Object.keys(i)[o].substr(0,r.length)+"</strong>",n.innerHTML+=Object.keys(i)[o].substr(r.length),n.innerHTML+="<input type='hidden' value='"+Object.keys(i)[o]+"'>",n.addEventListener("click",function(e){s.value=this.getElementsByTagName("input")[0].value,closeAllLists()}),t.appendChild(n),(a=document.createElement("SPAN")).setAttribute("class","autocomplete-items-comments"),Object.values(i)[o]&&(a.innerHTML="//"+Object.values(i)[o]),n.appendChild(a))}),s.addEventListener("keydown",function(e){var t=document.getElementById(this.id+"autocomplete-list");t=t&&t.getElementsByTagName("div"),40==e.keyCode?(0<=c&&t[c].classList.remove("autocomplete-active"),c++,addActive(t)):38==e.keyCode?(0<=c&&t[c].classList.remove("autocomplete-active"),c--,addActive(t)):39==e.keyCode&&-1<c&&t&&t[c].click()}),document.addEventListener("click",function(e){closeAllLists(e.target)})}(document.getElementById("inputcmd"),JSON.parse(e))})},window.setAutoUpdateLog=function setAutoUpdateLog(){setInterval(function(){!function showLog(){var e=new URL(location.href).searchParams.get("agent");l.get("./agents/"+e+"/log").then(function(e){var t=document.getElementById("log");s!=e&&(t!=document.activeElement?(t.innerHTML=e,s=e,t.scrollTop=t.scrollHeight,o=!1):o||(o=!0,l.instantMessage("Log has new message(s) to show.")))})}()},1e3)},window.showBuffer=function showBuffer(){var e=localStorage.getItem("agentBuffer");l.instantMessage(e),localStorage.removeItem("agentBuffer")},window.delLog=function delLog(){var e=new URL(location.href).searchParams.get("agent");l.deleteResource("./agents/"+e+"/log").then(function(e){document.getElementById("inputcmd").focus(),l.instantMessage("Log is empty.")})},window.killAg=function killAg(){var e=new URL(location.href).searchParams.get("agent");1==confirm("Kill agent '"+e+"'?")?l.deleteResource("./agents/"+e).then(function(e){window.location.assign("./agents.html")}):l.instantMessage("Don't worry, agent '"+e+"' is still here.")},window.runCMD=function runCMD(){var e=new URL(location.href).searchParams.get("agent");data="c="+encodeURIComponent(document.getElementById("inputcmd").value),l.post("./agents/"+e+"/cmd",data,"application/x-www-form-urlencoded"),document.getElementById("inputcmd").value="",document.getElementById("inputcmd").focus(),window.location.reload()},window.newAg=function newAg(){l.post("/agents/"+document.getElementById("createAgent").value).then(function(e){window.location.assign("/agent.html?agent="+document.getElementById("createAgent").value)})},window.setGraphWindow=function setGraphWindow(){var t=document.getElementById("modalinspection"),e=document.getElementById("btninspection"),n=document.getElementsByClassName("close")[0];e.onclick=function(){!function getGraph(){var t=new URL(location.href).searchParams.get("agent");l.get("./agents/"+t).then(function(e){!function renderGraphvizFromAgentJson(a,e){var o=[];o.push("digraph G {\n","\tgraph [\n",'\t\trankdir="LR"\n','\t\tbgcolor="transparent"\n',"\t]\n"),o.push("\tsubgraph cluster_mind {\n","\t\tstyle=rounded\n"),e.namespaces.forEach(function(e){o.push('\t\t"'+e+'" [ \n\t\t\tlabel = "'+e+'"','\n\t\t\tshape="box" style=filled pencolor=black fillcolor=cornsilk\n',"\t\t]\n")}),o.push("\t}\n"),e.namespaces.forEach(function(e){o.push('\t"'+a+'"->"'+e+'" [arrowhead=none constraint=false style=dotted]\n')});var t=a.length<=r.MAX_LENGTH?a:a.substring(0,r.MAX_LENGTH)+" ...";o.push('\t"'+a+'" [ \n\t\tlabel = "'+t+'"\n','\t\tshape = "ellipse" style=filled fillcolor=white\n',"\t]\n"),e.roles.forEach(function(e){o.push('\t"'+e.group+'" [ \n\t\tlabel = "'+e.group+'"',"\n\t\tshape=tab style=filled pencolor=black fillcolor=lightgrey\n","\t]\n",'\t"'+e.group+'"->"'+a+'" [arrowtail=normal dir=back label="'+e.role+'"]\n')}),e.missions.forEach(function(t){o.push('\t\t"'+t.scheme+'" [ \n\t\tlabel = "'+t.scheme+'"',"\n\t\t\tshape=hexagon style=filled pencolor=black fillcolor=linen\n","\t\t]\n"),t.responsibles.forEach(function(e){o.push('\t"'+e+'"->"'+t.scheme,'" [arrowtail=normal arrowhead=open label="responsible"]\n','\t{rank=same "'+e+'" "'+t.scheme+'"}\n')}),o.push('\t"'+t.scheme+'"->"'+a,'" [arrowtail=normal dir=back label="'+t.mission+'"]\n')}),e.workspaces.forEach(function(n){o.push("\tsubgraph cluster_"+n.workspace+" {\n",'\t\tlabel="'+n.workspace+'"\n','\t\tlabeljust="r"\n',"\t\tgraph[style=dashed]\n"),n.artifacts.forEach(function(e){if(r.HIDDEN_ARTS.indexOf(e.type)<0){var t=e.artifact.length<=r.MAX_LENGTH?e.artifact:e.artifact.substring(0,r.MAX_LENGTH)+" ...";o.push('\t\t"'+n.workspace+"_"+e.artifact+'" [ ','\n\t\t\tlabel="'+t+" :\\n"),t=e.type.length<=r.MAX_LENGTH?e.type:e.type.substring(0,r.MAX_LENGTH)+" ...",o.push(t+'"\n'),o.push("\t\t\tshape=record style=filled fillcolor=white\n"),o.push("\t\t]\n")}}),n.artifacts.forEach(function(e){r.HIDDEN_ARTS.indexOf(e.type)<0&&o.push('\t"'+a+'"->"'+n.workspace+"_"+e.artifact+'" [arrowhead=odot]\n')}),o.push("\t}\n")}),o.push("}\n");var n=d3.transition().duration(750).ease(d3.easeLinear);d3.select("#agentdiagram").graphviz().transition(n).renderDot(o.join(""))}(t,JSON.parse(e))})}(),t.style.display="block"},n.onclick=function(){t.style.display="none"},window.onclick=function(e){e.target==t&&(t.style.display="none")}},e.exports={sum:function sum(e,t){return e+t},division:function division(e,t){return e/t}}},function(e,t){var n;function connectToWS(){var e="ws://"+window.location.hostname+":8026/ws/messages";void 0!==n&&(console.log("closing..."),n.close()),(n=new WebSocket(e)).onmessage=function(e){e.data.startsWith("?")||console.log("onmessage. content: "+e.data)},n.onopen=function(e){console.log("onopen.")},n.onclose=function(e){console.log("onclose.")},n.onerror=function(e){console.log("Error!")}}connectToWS(),window.connectToWS=connectToWS},function(e,t,n){var a=n(0),o=n(1);window.getDF=function getDF(){a.get("./services").then(function(e){if(df=JSON.parse(e),0<Object.keys(df).length){var n=a.createTable("dfsection");Object.keys(df).forEach(function(t){df[t].services.sort().forEach(function(e){a.addTwoCellsInARow(n,df[t].agent,e)})})}else{(function _readOnlyError(e){throw new Error('"'+e+'" is read-only')})("p"),(o=document.createElement("p")).innerText="nothing to show",document.getElementById("dfsection").appendChild(o)}})}},function(e,t,n){var u=n(0),d=n(1);function updateWorkspaceMenu(r,e,t,n){if(n){var a=document.createElement("label");a.setAttribute("for","doc-drawer-checkbox"),a.setAttribute("class","button drawer-close"),document.getElementById(r).appendChild(a);var o=document.createElement("h3");o.innerHTML="&#160",document.getElementById(r).appendChild(o)}var s=new URL(location.href).searchParams,i=s.get("workspace"),c=s.get("artifact"),l=[];e.sort().forEach(function(e){l.push(u.get("./workspaces/"+e))}),Promise.all(l).then(function(e){e.forEach(function(e){var a=JSON.parse(e),o=0;Object.keys(a.artifacts).sort().forEach(function(e){if(d.HIDDEN_ARTS.indexOf(a.artifacts[e].type)<0)if(o++,i===a.workspace){if(1===o)(n=document.createElement("a")).setAttribute("href","./workspace.html?workspace="+a.workspace),n.innerHTML="<h5><b>"+a.workspace+"</b></h5>",document.getElementById(r).appendChild(n);var t=document.createElement("a");t.innerHTML=c===e?"<h5><b>&#160;&#160;&#160;"+e+"</b></h5>":"<h5>&#160;&#160;&#160;"+e+"</h5>",t.setAttribute("href","./artifact.html?workspace="+a.workspace+"&artifact="+e+"&javafile="+a.artifacts[e].type+".java"),document.getElementById(r).appendChild(t)}else{var n;if(1===o)(n=document.createElement("a")).setAttribute("href","./workspace.html?workspace="+a.workspace),n.innerHTML="<h5>"+a.workspace+"</h5>",document.getElementById(r).appendChild(n)}})})}).then(function(e){document.getElementById(r).appendChild(u.createDefaultHR());var t=document.createElement("a");t.setAttribute("href","./artifact_new.html"),t.innerHTML="create template",document.getElementById(r).appendChild(t)})}window.getCurrentJavaContent=function getCurrentJavaContent(){var o=new URL(location.href).searchParams.get("javafile");u.get("/workspaces/temp/javafile/"+o).then(function(e){var t=document.createElement("button");t.setAttribute("type","submit"),t.innerHTML="Save & Reload",document.getElementById("footer_menu").appendChild(t);var n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("onclick","location.href='./workspaces.html'"),n.innerHTML="Discard changes",document.getElementById("footer_menu").appendChild(n);var a=document.createElement("i");a.style.fontSize="12px",a.innerHTML="Editing: <b>"+o+"</b>",document.getElementById("footer_menu").appendChild(a);document.getElementById("usrform");!function createJavaEditor(e){var n=document.querySelector("form textarea[name='javafile']"),a=ace.edit();a.session.setValue(e),a.setTheme("ace/theme/textmate"),a.session.setMode("ace/mode/java"),a.setOptions({enableBasicAutocompletion:!0}),n.parentNode.insertBefore(a.container,n),n.style.display="none";var t=n;for(;t&&"form"!=t.localName;)t=t.parentNode;t.addEventListener("submit",function(e){e.preventDefault(),n.value=a.getValue();var t=new URL(location.href).searchParams.get("javafile");u.post("/workspaces/temp/javafile/"+t,new FormData(e.target)).then(function(e){localStorage.setItem("workspaceBuffer",e),window.location.replace("./workspaces.html")})},!0)}(e)})},window.getWorkspaces=function getWorkspaces(){new URL(location.href).searchParams.get("workspace"),u.get("./workspaces").then(function(e){var t=JSON.parse(e);updateWorkspaceMenu("nav-drawer",t,void 0,!0),updateWorkspaceMenu("nav-drawer-frame",t,void 0,!1)})},window.getArtifactDetails=function getArtifactDetails(){var e=new URL(location.href).searchParams,t=e.get("workspace"),n=e.get("artifact");u.get("./workspaces/"+t+"/"+n).then(function(e){if(art=JSON.parse(e),0<Object.keys(art).length){var t=u.createTable("artsection");Object.keys(art).forEach(function(n){if("string"==typeof art[n])u.addTwoCellsInARow(t,n,art[n]);else{var a="";Object.keys(art[n]).forEach(function(t){"properties"===n?Object.keys(art[n][t]).forEach(function(e){a+=e+"("+art[n][t][e]+")<br />"}):a+=art[n][t]+"<br />"}),u.addTwoCellsInARow(t,n,a)}})}else{(function _readOnlyError(e){throw new Error('"'+e+'" is read-only')})("p"),(d=document.createElement("p")).innerText="nothing to show",document.getElementById("artsection").appendChild(d)}})},window.setEditButton=function setEditButton(){document.getElementById("btneditartifact").setAttribute("href","artifact_editor.html?workspace="+new URL(location.href).searchParams.get("workspace")+"&artifact="+new URL(location.href).searchParams.get("artifact")+"&javafile="+new URL(location.href).searchParams.get("javafile"))},window.setArtifactModalWindow=function setArtifactModalWindow(){var t=document.getElementById("modalartgraph"),e=document.getElementById("btnartdiagram"),n=document.getElementsByClassName("close")[0];e.onclick=function(){!function getArtGraph(){var e=new URL(location.href).searchParams,t=e.get("workspace"),n=e.get("artifact");u.get("./workspaces/"+t+"/"+n).then(function(e){var a=[],o=JSON.parse(e);a.push("digraph G {\n"),a.push("\tgraph [\n"),a.push('\t\trankdir = "LR"\n'),a.push('\t\tbgcolor="transparent"\n'),a.push("\t]\n");var t=o.artifact.length<=d.MAX_LENGTH?o.artifact:o.artifact.substring(0,d.MAX_LENGTH)+" ...";a.push('\t"'+o.artifact+'" [ \n\t\tlabel = "'+t+":\\n"),t=o.type.length<=d.MAX_LENGTH?o.type:o.type.substring(0,d.MAX_LENGTH)+" ...",a.push(t+"|"),Object.keys(o.properties).forEach(function(e){var t=Object.keys(o.properties[e])[0]+"("+Object.values(o.properties[e])[0].toString()+")",n=t.length<=d.MAX_LENGTH?t:t.substring(0,d.MAX_LENGTH)+" ...";a.push(n+"|")}),o.operations.forEach(function(e){var t=e.length<=d.MAX_LENGTH?e:e.substring(0,d.MAX_LENGTH)+" ...";a.push(t+"\\n")}),a.push('"\n'),a.push("\t\tshape=record style=filled fillcolor=white\n"),a.push("\t\t];\n"),o.linkedArtifacts.forEach(function(e){var t=e.length<=d.MAX_LENGTH?e:e.substring(0,d.MAX_LENGTH)+" ...";a.push('\t\t"'+e+'" [ label="'+t+'"'),a.push("\t\tshape=record style=filled fillcolor=white\n"),a.push("\t]\n"),a.push('\t"'+o.artifact+'" -> "'+e+'" [arrowhead="onormal"]')}),o.observers.forEach(function(e){if("cartago.AgentBodyArtifact"!==o.type){var t=e.length<=d.MAX_LENGTH?e:e.substring(0,d.MAX_LENGTH)+"...";a.push('\t"'+e+'" [ \n\t\tlabel = "'+t+'"\n'),a.push('\t\tshape = "ellipse" style=filled fillcolor=white\n'),a.push("\t];\n"),a.push('\t"'+e+'" -> "'+o.artifact+'" [arrowhead="odot"];\n')}}),a.push("}\n");var n=d3.transition().duration(750).ease(d3.easeLinear);d3.select("#artifactgraph").graphviz().transition(n).renderDot(a.join(""))})}(),t.style.display="block"},n.onclick=function(){t.style.display="none"},window.onclick=function(e){e.target==t&&(t.style.display="none")}},window.newArt=function newArt(){u.get("/workspaces/temp/javafile/"+document.getElementById("createArtifact").value).then(function(e){window.location.assign("/artifact_editor.html?javafile="+document.getElementById("createArtifact").value)})},window.getWorkspaceDetails=function getWorkspaceDetails(){var a=d.HIDDEN_ARTS,e=new URL(location.href).searchParams.get("workspace");u.get("./workspaces/"+e).then(function(e){wks=JSON.parse(e);var n=document.getElementById("wkstable");Object.keys(wks).forEach(function(e){if("string"==typeof wks[e])u.addTwoCellsInARow(n,e,wks[e]);else{var t="";Object.keys(wks[e]).forEach(function(e){a.indexOf(wks.artifacts[e].type)<0&&(t+=e+"<br />")}),u.addTwoCellsInARow(n,e,t)}})})},window.setWorkspaceModalWindow=function setWorkspaceModalWindow(){var t=document.getElementById("modalwksgraph"),e=document.getElementById("btndiagram"),n=document.getElementsByClassName("close")[0];e.onclick=function(){!function getWksGraph(){var o=new URL(location.href).searchParams.get("workspace");u.get("./workspaces/"+o).then(function(e){var a=[],t=0;a.push("digraph G {\n"),a.push("\tgraph [\n"),a.push('\t\trankdir = "LR"\n'),a.push('\t\tbgcolor="transparent"\n'),a.push("\t]\n"),a.push("\tsubgraph cluster_0 {\n"),a.push('\t\tlabel="'+o+'"\n'),a.push('\t\tlabeljust="r"\n'),a.push("\t\tgraph[style=dashed]\n"),Object.keys(wks.artifacts).forEach(function(n){var e;d.HIDDEN_ARTS.indexOf(wks.artifacts[n].type)<0&&(t++,e=wks.artifacts[n].artifact.length<=d.MAX_LENGTH?wks.artifacts[n].artifact:wks.artifacts[n].artifact.substring(0,d.MAX_LENGTH)+" ...",a.push('\t"'+wks.artifacts[n].artifact+'" [ \n\t\tlabel = "'+e+":\n"),e=wks.artifacts[n].type.length<=d.MAX_LENGTH?wks.artifacts[n].type:wks.artifacts[n].type.substring(0,d.MAX_LENGTH)+" ...",a.push(e+'"\n'),a.push("\t\tshape=record style=filled fillcolor=white\n"),a.push("\t\t];\n"),wks.artifacts[n].observers.forEach(function(e){if("cartago.AgentBodyArtifact"===!wks.artifacts[n].type){var t=e.length<=d.MAX_LENGTH?e:e.substring(0,d.MAX_LENGTH)+"...";a.push('\t"'+e+'" [ \n\t\tlabel = "'+t+'"\n'),a.push('\t\tshape = "ellipse" style=filled fillcolor=white\n'),a.push("\t];\n"),a.push('\t\t"'+e+'" -> "'+wks.artifacts[n].artifact+'" [arrowhead="odot"];\n')}}),wks.artifacts[n].linkedArtifacts.forEach(function(e){a.push('\t"'+wks.artifacts[n].artifact+'" -> "'+e+'" [arrowhead="onormal"];\n')}))}),a.push("\t}\n"),a.push("}\n"),t<=0&&(a=['digraph G {"no artifacts\nto show"}\n']);var n=d3.transition().duration(750).ease(d3.easeLinear);d3.select("#overviewgraph").graphviz().transition(n).renderDot(a.join(""))})}(),t.style.display="block"},n.onclick=function(){t.style.display="none"},window.onclick=function(e){e.target==t&&(t.style.display="none")}}},function(e,t,n){function _readOnlyError(e){throw new Error('"'+e+'" is read-only')}var i=n(0),o=n(1);function updateOrganisationMenu(n,e,t){if(t){var a=document.createElement("label");a.setAttribute("for","doc-drawer-checkbox"),a.setAttribute("class","button drawer-close"),document.getElementById(n).appendChild(a);var o=document.createElement("h3");o.innerHTML="&#160",document.getElementById(n).appendChild(o)}var r=new URL(location.href).searchParams.get("organisation");e.sort(),e.forEach(function(e){var t=document.createElement("a");t.setAttribute("href","./organisation.html?organisation="+e),t.innerHTML=r===e?"<h5><b>"+e+"</b></h5>":"<h5>"+e+"</h5>",document.getElementById(n).appendChild(t)}),document.getElementById(n).appendChild(i.createDefaultHR());var s=document.createElement("a");s.setAttribute("href","./oe_role_new.html"),s.innerHTML="create role",document.getElementById(n).appendChild(s)}window.getOE=function getOE(){i.get("./oe").then(function(e){updateOrganisationMenu("nav-drawer",JSON.parse(e),!0),updateOrganisationMenu("nav-drawer-frame",JSON.parse(e),!1)})},window.getOrganisationDetails=function getOrganisationDetails(){var a=new URL(location.href).searchParams.get("organisation");i.get("./oe/"+a+"/os/").then(function(e){item=JSON.parse(e),Object.keys(item.groups).forEach(function(t){var e=i.createTable("groupssection");i.addTwoCellsInARow(e,"group",item.groups[t].group+"&#160;&#160;&#160;<a href='/oe/"+a+"/group/"+item.groups[t].group+"/"+item.groups[t].group+".npl'>[specification]</a>&#160;<a href='/oe/"+a+"/group/"+item.groups[t].group+"/debug'>[instance]</a>"),i.addTwoCellsInARow(e,"well formed",item.groups[t].isWellFormed);var n="";Object.keys(item.groups[t].roles).forEach(function(e){n+=item.groups[t].roles[e].role+" ( "+item.groups[t].roles[e].cardinality+" )",0<item.groups[t].roles[e].superRoles.length&&(n+=" <- "+item.groups[t].roles[e].superRoles.join(", ")),n+=" <br />"}),i.addTwoCellsInARow(e,"roles",n)}),Object.keys(item.groups).length<=0&&(_readOnlyError("p"),(o=document.createElement("p")).innerText="nothing to show",document.getElementById("groupssection").appendChild(o));Object.keys(item.schemes).forEach(function(t){var e=i.createTable("schemessection");i.addTwoCellsInARow(e,"scheme",item.schemes[t].scheme),i.addTwoCellsInARow(e,"well formed",item.schemes[t].isWellFormed);var n="";Object.keys(item.schemes[t].goals).forEach(function(e){n+=item.schemes[t].goals[e].goal+"<br />"}),i.addTwoCellsInARow(e,"goals",n);var a="";Object.keys(item.schemes[t].missions).forEach(function(e){a+=item.schemes[t].missions[e].mission+" ( "+item.schemes[t].missions[e].missionGoals.join(", ")+" ) <br />"}),i.addTwoCellsInARow(e,"missions",a);var o="";Object.keys(item.schemes[t].players).forEach(function(e){o+=item.schemes[t].players[e].agent+"<br />"}),i.addTwoCellsInARow(e,"players",o)}),Object.keys(item.schemes).length<=0&&(_readOnlyError("p"),(o=document.createElement("p")).innerText="nothing to show",document.getElementById("schemessection").appendChild(o));if(Object.keys(item.norms).length<=0){_readOnlyError("p"),(o=document.createElement("p")).innerText="nothing to show",document.getElementById("normssection").appendChild(o)}else{var t=i.createTable("normssection");Object.keys(item.norms).forEach(function(e){i.addTwoCellsInARow(t,"norm",item.norms[e].norm+": "+item.norms[e].role+" -> "+item.norms[e].type+" -> "+item.norms[e].mission)})}})},window.setOrganisationModalWindow=function setOrganisationModalWindow(){var t=document.getElementById("modalorggraph"),e=document.getElementsByClassName("close")[0];document.getElementById("btngroupdiagram").onclick=function(){!function getOrgGroupGraph(){var e=new URL(location.href).searchParams.get("organisation");i.get("./oe/"+e+"/os").then(function(e){var o=[],t=JSON.parse(e);o.push("digraph G {graph [rankdir=BT bgcolor=transparent; compound=true;]\n"),o.push("\tsubgraph cluster_SS { \n"),o.push("\t\tpencolor=transparent fontcolor=transparent\n");t.groups.forEach(function(e){e.roles.forEach(function(t){t.superRoles.forEach(function(e){"soc"!==e&&o.push('\t\t"'+t.role+'" -> "'+e+'" [arrowhead=onormal,arrowsize=1.5];\n')})})}),t.groups.forEach(function(n){!0===n.isWellFormed?o.push('\t\t"'+n.group+'" [label="'+n.group+'",shape=tab, fontname="Courier",style=filled,fillcolor=gold];\n'):o.push('\t\t"'+n.group+'" [label="'+n.group+'",shape=tab, fontname="Courier",style=filled,fillcolor=lightgrey];\n'),n.roles.forEach(function(e){"soc"!==e.role&&(o.push('\t\t"'+e.role+'" [fontname="Arial",shape=box,style=rounded];\n'),o.push('\t\t"'+n.group+'" -> "'+e.role+'"  [arrowtail=odiamond, arrowhead=none, dir=both, label="'+e.cardinality+'",fontname="Times",arrowsize=1.5];\n'))}),n.subGroups.forEach(function(e){o.push('\t\t"'+n.group+'" -> "'+e+'"  [arrowtail=odiamond, arrowhead=none, dir=both, label="'+r.cardinality+'",fontname="Times",arrowsize=1.5];\n')}),n.links.forEach(function(e){var t="normal";"communication"===e.type?t="dot":"acquaintance"===e.type&&(t="vee");var n="";e.isBiDir&&(n+=",arrowtail="+t);var a="";"IntraGroup"===e.scope&&(a=",style=dotted"),o.push('\t\t"'+e.source+'" -> "'+e.target+'" [arrowhead='+t+n+a+"];\n")}),n.compatibilities.forEach(function(e){var t="arrowhead=diamond";e.isBiDir&&(t+=",arrowtail=diamond");var n="";"IntraGroup"===e.scope&&(n=",style=dotted"),o.push('\t\t"'+e.source+'" -> "'+e.target+'"  ['+t+n+"];\n")}),n.players.forEach(function(e){o.push('\t\t"'+e.agent+'" [shape=ellipse];\n'),o.push('\t\t"'+e.agent+'" -> "'+e.role+'" [arrowsize=0.5];\n')}),n.responsibleFor.forEach(function(e){var t="lightgrey";e.isWellFormed&&(t="gold"),o.push('\t\t"'+e.scheme+'" [shape=hexagon, style=filled, fontname="Courier", fillcolor='+t+"];\n"),o.push('\t\t"'+n.group+'" -> "'+e.scheme+'" [arrowsize=0.5];\n')})}),o.push("}\n"),o.push("\t}\n"),o.push([].join(" ")),o.push("}\n");var n=d3.transition().duration(750).ease(d3.easeLinear);d3.select("#orgdiagram").graphviz().transition(n).renderDot(o.join(""))})}(),t.style.display="block"},document.getElementById("btnschemediagram").onclick=function(){!function getOrgSchemeGraph(){var e=new URL(location.href).searchParams.get("organisation");i.get("./oe/"+e+"/os").then(function(e){var i=[],t=JSON.parse(e);i.push("digraph G {graph [rankdir=BT bgcolor=transparent; compound=true;]\n"),i.push("\tsubgraph cluster_SS { \n"),i.push("\t\tpencolor=transparent fontcolor=transparent\n"),t.schemes.forEach(function(s){s.goals.forEach(function(t){var e="black";t.isSatisfied?e="blue":s.isWellFormed&&t.enabled&&(e="green");var n="plaintext",a="0";if(""!==t.operation&&("choice"===t.operation?(n="underline",a="1"):"parallel"===t.operation&&(n="underline",a="2")),i.push("\t\t"+t.goal+' [label="'+t.goal+'", shape='+n+",peripheries="+a+',fontname="fantasy",fontcolor='+e+"];\n"),""!==t.operation){var o=null,r=0;"sequence"===t.operation&&(r=1),s.goals.forEach(function(e){e.parent===t.goal&&(i.push("\t\t"+e.goal+" -> "+t.goal+" [samehead=true arrowhead=none];\n"),0<r&&(r++,null!=o&&i.push("\t\t"+o.goal+" -> "+e.goal+" [style=dotted, constraint=false, arrowhead=empty,arrowsize=0.5,color=grey];\n"),o=e))})}}),s.missions.forEach(function(t){i.push('\t\t"'+s.scheme+"."+t.mission+'" [ label = "'+t.mission+'" fontname="Arial", shape=plaintext, style=rounded];\n'),t.missionGoals.forEach(function(e){i.push('\t\t"'+s.scheme+"."+t.mission+'" -> "'+e+'" [fontname=times,label="'+t.cardinality+'",arrowsize=0.5];\n')})}),s.players.forEach(function(e){i.push('\t\t"'+e.agent+'" [ label = "'+e.agent+'" fontname="Arial", shape=plaintext, style=rounded];\n'),i.push('\t\t"'+e.agent+'" -> "'+s.scheme+"."+e.mission+'" [fontname=times,arrowsize=0.5];\n')})}),i.push("}\n"),i.push("\t}\n"),i.push("}\n");var n=d3.transition().duration(750).ease(d3.easeLinear);d3.select("#orgdiagram").graphviz().transition(n).renderDot(i.join(""))})}(),t.style.display="block"},document.getElementById("btnnormdiagram").onclick=function(){!function getOrgNormGraph(){var e=new URL(location.href).searchParams.get("organisation");i.get("./oe/"+e+"/os").then(function(e){var n=[],t=JSON.parse(e);n.push("digraph G {graph [rankdir=BT bgcolor=transparent; compound=true;]\n"),n.push("\tsubgraph cluster_SS { \n"),n.push("\t\tpencolor=transparent fontcolor=transparent\n"),t.norms.forEach(function(e){var t="bold";"permission"===e.type&&(t="filled"),n.push('\t\t"'+e.role+'" [fontname="Arial",shape=box,style=rounded];\n'),n.push('\t\t"'+e.mission+'" [fontname="Arial", shape=plaintext, style=rounded];\n'),n.push('\t\t"'+e.role+'" -> "'+e.mission+'" [arrowhead=inv,style='+t+"];\n")}),n.push("}\n"),n.push("\t}\n"),n.push("}\n");var a=d3.transition().duration(750).ease(d3.easeLinear);d3.select("#orgdiagram").graphviz().transition(a).renderDot(n.join(""))})}(),t.style.display="block"},e.onclick=function(){t.style.display="none"},window.onclick=function(e){e.target==t&&(t.style.display="none")}},window.newRole=function newRole(e,t){http=new XMLHttpRequest;var n=document.getElementById("orgGrRole").value,a=n.lastIndexOf("."),o=n.substring(0,a),r=n.substring(a+1),s=o.indexOf("."),i=(e=o.substring(0,s),o.substring(s+1));http.open("POST","/oe/"+e+"/group/"+i,!1),http.setRequestHeader("Content-type","application/x-www-form-urlencoded");var c="role="+encodeURIComponent(r);http.send(c),window.location.assign("/oe.html")}}]);